  <!DOCTYPE html>
    <html>
      <head>
        <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.2/howler.js"></script>
        <script src="https://rawgit.com/ngokevin/aframe-randomizer-components/master/dist/aframe-randomizer-components.min.js"></script>
        <script src="noise.js"></script>
        <script src="bundle.js"></script>
        <script src="https://rawgit.com/ngokevin/aframe-look-at-component/master/dist/aframe-look-at-component.min.js"></script>
        <script src="node_modules/aframe-extras/dist/aframe-extras.controls.min.js"></script>
        <script src="node_modules/aframe-extras/dist/aframe-extras.min.js"></script>
        <script src="http://cdn.rawgit.com/donmccurdy/aframe-extras/v3.3.1/dist/aframe-extras.controls.min.js"></script>
        <script src="http://cdn.rawgit.com/donmccurdy/aframe-extras/v3.3.1/dist/aframe-extras.min.js"></script>




                <!-- AUDIO REACTIVE -->
        <script src="node_modules/aframe-audioanalyser-component/dist/aframe-audioanalyser-component.js"></script>
        <script src="node_modules/aframe-audioanalyser-component/examples/components/audioanalyser-volume-scale.js"></script>



                <!-- HERE WE ARE     -->
        <title>here we are</title>







        <script>
                var sound = new Howl({
                  src: ['audio/bm.mp3']
                });

                var alert = new Howl({
                  src: ['audio/alert.wav']
                });

                var bgsound = new Howl({
                  src: ['audio/alert.wav']
                });

                alert.play();
                sound.play();
        </script>
</head>



<!-- Scene -->
        <body>
          <a-scene stats>

<!-- Assets -->
            <a-assets>
                    <!-- OBJECTS -->
                                  <a-mixin id="cube" geometry="primitive: box" material="shader:flat;color#000000;" random-rotation random-scale random-position="min:-10 0 -10;max:10 20 10;"></a-mixin>

                    <!--Terrain-->
                                  <a-asset-item id="terrain-obj" src="terrain.obj"></a-asset-item>
                                  <a-asset-item id="terrain-mtl" src="terrain.mtl"></a-asset-item>


                    <!-- Temple -->
                                  <a-asset-item id="temple-obj" src="assets/temple.obj"></a-asset-item>
                                  <a-asset-item id="temple-mtl" src="assets/temple.mtl"></a-asset-item>

                    <!--Ceiling-->
                                  <a-asset-item id="ceiling-obj" src="assets/ceiling.obj"></a-asset-item>
                                  <a-asset-item id="ceiling-mtl" src="assets/ceiling.mtl"></a-asset-item>


                    <!-- Mother Shells-->

                                  <a-asset-item id="sphere-obj" src="mother_shell.obj"></a-asset-item>
                                  <a-asset-item id="sphere-mtl" src="mother_shell.mtl"></a-asset-item>

                                  <audio id="river" src="audio/bm.mp3" preload="auto" autoplay></audio>

                                  <!-- Checkpoints -->
                                  <a-mixin id="checkpoint"></a-mixin>
                                  <a-mixin id="checkpoint-hovered" color="#FFFFFF"></a-mixin>

                                  <!-- Video Textures -->
                                  <video id="testvid" src="test.mov" autoplay loop="true">
                                  <video id="disp" src="displacement.mov" autoplay loop="true">
                                  <video id="geometric" src="geometric.mp4" autoplay loop="true">
                                  <video id="color" src="color_sm.mov" autoplay loop="true">

                                  <!-- materials -->
                                  <a-mixin id="mtl_ancient" material="shader:standard; roughness:0; metalness:.5; sphericalEnvMap:#testvid"></a-mixin>
                                  <a-mixin id="mtl_ancient2" material="shader:standard;roughness:0;color:#999999;metalness:.4;normalMap:norm.jpg;sphericalEnvMap:#testvid;normalTextureRepeat:.5 .5;"></a-mixin>


                                  <a-mixin id="rotAnim"  attribute="rotation" to="0 360 0" easing="linear" dur="200" fill="backwards"></a-mixin>
                                  <a-mixin id="rotAnim2"  attribute="rotation" to="0 360 0" easing="ease-out-quad" dur="2000" fill="forwards"></a-mixin>
                                  <a-mixin id="posAnim"  attribute="position" to="0 2 0" easing="ease-out-quad" dur="2000" fill="forwards" alternate="reverse" repeat="indefinately"></a-mixin>
                                  <a-mixin id="select-anim" begin="click" attribute="scale" to="2 2 2" easing="ease-out-quad" dur="200" fill="forwards" repeat="1"></a-mixin>

            </a-assets>
<!-- Assets -->



      <!-- Player -->
<a-entity camera
          id="camera"
          active="true"
          look-controls
          wasd-controls
          mouse-cursor
          universal-controls="movementControls: checkpoint"
          checkpoint-controls="mode: animate"
          position="0 2 0"
          rotation="0 90 0">
    <a-entity cursor="maxDistance: 30"
              fuse="true"
              raycaster="far: 30; objects: .waypoints,.intersectable"
              position="0 0 -1"
              geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.014;"
              material="color: #FFF; shader: flat;">

              <a-animation begin="click" easing="ease-in" attribute="scale"  fill="forwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
              <a-animation begin="fusing" easing="ease-in" attribute="scale" fill="forwards" from="1 1 1" to="0.1 0.1 0.1" dur="1500"></a-animation>
    </a-entity>
</a-entity>





<!-- Rotating Scene Lights -->
      <a-entity position="" rotation="" scale="1000 1000 1000" visible="">
        <a-light type="ambient" position="0 0 0" color="#FF0000" intensity=".01" rotation="" scale="" visible="" light="">
          <a-animation attribute="intensity" delay="0" dur="1000" from="0" to=".1" repeat="1" easing="linear" direction="alternate"></a-animation>
        </a-light>

        <a-light type="point" position="0 0 -5" color="#77427F" intensity=".3" rotation="" scale="" visible="" light=""></a-light>
        <a-light type="point" position="0 0 5" color="#FF5500" intensity=".3" rotation="" scale="" visible="" light=""></a-light>
        <a-light type="point" position="5 0 0" color="#FF66FF" intensity=".2" rotation="0 169.5462119999768 0" scale="1 1 1" visible="true" light="type:point;color:#6cd0ff;intensity:.4">
          <a-animation attribute="rotation" from="0 0 0 " to="0 360 0" dur="1000" delay="0" repeat="indefinate" direction="normal" easing="linear"></a-animation>
        </a-light>

        <a-animation attribute="rotation" from="0 0 0 " to="0 360 0" dur="60000" delay="0" repeat="indefinate" direction="normal" easing="linear"></a-animation>
      </a-entity>

      <a-entity light="type: point; intensity: 0.75; distance: 50; decay: 2; color:#FF0000"
                position="0 28 0"></a-entity>






<a-entity position="0 28 0">
      <a-sphere id="waypoint1"
        class="waypoints"
        color="#FFF"
        scale=".25 .25 .25"
        audioanalyser="src: #raver"
        audioanalyser-volume-scale="multiplier: 1"
        position="0 0 0"
        checkpoint
        side="single"
        shader="flat">
    </a-sphere>
</a-entity>




<a-entity position="0 2 0">
<a-sphere id="waypoint1"
        class="waypoints"
        color="#FFF"
        scale=".25 .25 .25"
        audioanalyser="src: #raver"
        audioanalyser-volume-scale="multiplier: 1"
        position="0 0 0"
        checkpoint
        side="single"
        shader="flat"
        light="type:point;color:#6cd0ff;intensity:20;decay:14;distance:25;"
></a-sphere>
</a-entity>


<a-entity position="-30 2 0">
<a-sphere id="boop"
      class="waypoints"
      color="#FFF"
      scale=".25 .25 .25"
      audioanalyser="src: #raver"
      audioanalyser-volume-scale="multiplier: 1"
      position="0 0 0"
      checkpoint
      side="single"
      shader="flat"
>
<a-animation begin="mouseenter" attribute="scale" from=".5 .5 .5" to="1 1 1" dur="100" repeat="3" direction="alternate" easing="ease"></a-animation>
</a-sphere>
</a-entity>

<!-- Temple -->
<a-entity obj-model="obj: #temple-obj; mtl: #temple-mtl" checkpoint position="0 0 0"></a-entity>
  <!-- ceiling -->
    <a-entity obj-model="obj: #ceiling-obj" checkpoint position="0 0 0" material="normalMap:#geometric"></a-entity>


<!-- Terrain -->
  <a-entity obj-model="obj: #terrain-obj;" material="normalMap:norm.jpg;normalTextureRepeat:80 80;src:cobalt_2048.jpg;sphericalEnvMap:#color;metalness:.7;displacementMap:#disp;displacementScale:3"></a-entity>



<!-- Mother Shell -->
<a-entity position="0 -15 0">
      <a-entity obj-model="obj: #sphere-obj;    mtl: #sphere-mtl"   position="0 5 0"></a-entity>
      <a-entity obj-model="obj: #sphere-obj"                        position="1 1 5" material="color:#000000"  sound="on: click; src: #river;" audioanalyser="src: #raver" audioanalyser-volume-scale="multiplier: 1"></a-entity>
      <a-entity obj-model="obj: #sphere-obj"                        position="10 1 1"  sound="on: click; src: #river;" ></a-entity>
      <a-entity obj-model="obj: #sphere-obj"                        position="1 1 15"  sound="on: click; src: #river;" ></a-entity>
</a-entity>



<!-- Checkpoints -->

<!--
      <a-entity position="1 0 1">
           <a-cylinder checkpoint radius="1" height="0.1" position="0 0 -5.2" color="#FFBB82" onclick=""></a-cylinder>
           <a-cylinder class="clickable" class="intersectable" checkpoint radius="1" height="500" position="150 0 -95" color="#39BB82" light="type:point;color:#ffffff;intensity:.2"></a-cylinder>
           <a-cylinder class="clickable" class="intersectable" checkpoint radius="1" height="0.1" position="-3 0 0" color="#39BB82"></a-cylinder>
      </a-entity>
-->


<!-- Starter Objects -->
      <a-sphere  position="0 -10 -1" radius=".6" color="#EF2D5E" id="link" material="normalMap:#geometric;;normalTextureRepeat: 10 10;sphericalEnvMap:#color;metalness:.7;displacementMap:#disp"></a-sphere>


<!-- Ground Plane -->
  <a-plane rotation="-90 0 0" position="0 -4 0" width="400" height="400" segmentsHeight="30" segmentsWidth="30" color="#7BC8A4" material="shader:standard;sphericalEnvMap:#color;metalness:.95;displacementMap:#disp;normalMap:#geometric"></a-plane>




  <!-- Audio analyser. -->
       <a-entity id="analyser"
         audioanalyser="src: #river"
         audioanalyser-waveform="radius: 0.5"
         rotation="90 0 0"
         position="0 30 0"></a-entity>



<a-sky color="#000000"></a-sky>







          <!-- Array -->
          <script>
            var cubeEl;
            var sceneEl = document.querySelector('a-scene');
            var xStartPos = -5
            var zStartPos = 15;
            var xPos;
            var zPos;
            var xMargin = 5;
            var zMargin = -5;
            var cubeszNum = 5;
            var cubesxNum = 5;
            var rootEl;
            var x;
            zPos = zStartPos;
            for (var i = 0; i < cubeszNum; i += 1) {
              xPos = xStartPos;
              for (var j = 0; j < cubesxNum; j += 1) {
                cubeEl = document.createElement('a-entity');
                cubeEl.setAttribute('mixin', 'cube mtl_ancient2');
                cubeEl.setAttribute('cursor-listener');
                cubeEl.setAttribute('class', 'clickable');
                cubeEl.setAttribute('class', 'intersectable');
                cubeEl.setAttribute('onclick', 'sound.play()');
                cubeEl.setAttribute('sound__1', 'on: click; src: #blip1;');
               cubeEl.setAttribute('sound__2', 'on: mouseenter; src: #blip2;');
               cubeEl.addEventListener('mouseenter', function () {
                 this.setAttribute('material', 'color', 'white');
                 alert.play();

               });
               var rotAnimation = document.createElement('a-animation');
               rotAnimation.setAttribute('begin','click');
               rotAnimation.setAttribute('mixin','rotAnim2');
               cubeEl.appendChild(rotAnimation);


                cubeEl.setAttribute('position', { x: xPos, y: 1, z: zPos});
                xPos += xMargin;
                sceneEl.appendChild(cubeEl);
              }
              zPos += zMargin;
            }
          </script>



<!-- Waypoints-->

<script>
var elms = document.getElementsByClassName('waypoints')
for (var i = 0; i < elms.length; i++) {

     elms[i].setAttribute("color", "#FFF");
   };
</script>




<!--Links-->
<script>
var scene = document.querySelector('a-scene');

var el= document.querySelector('#link');
el.addEventListener('click', function () {
  window.location.href = 'https://google.com';
});
</script>



<!-- Audio Reactive -->
<script>
<!-- AUDIO REACT -->
var el= document.querySelector('#audioREACT');
el.addEventListener('click', function () {
  var scene = document.querySelector('a-scene');
  var newSound = document.createElement('audio');
  newSound.id = 'nsound';
  newSound.setAttribute('src','audio/bm.mp3');
  newSound.setAttribute('autoplay','true');
  alert.play();
  el.setAttribute('audioanalyser','src: #nsound');
  el.setAttribute('audioanalyser-volume-scale','multiplier:1');
});
</script>




<!-- Eminating Circle-->
<script>

document.querySelector('#boop').addEventListener('mouseenter', function () {
  this.setAttribute('material', 'color', 'white');
  alert.play();

});

document.querySelector('#boop').addEventListener('mouseleave', function () {
    this.setAttribute('material', 'color', 'white');
  });

  document.querySelector('#boop').addEventListener('mouseleave', function () {
      this.setAttribute('material', 'color', 'white');
    });
    </script>


<script>
    (function () {
      // Custom states.
      var clickedEl = null;
      var els = document.querySelectorAll('a-entity');
      Array.prototype.forEach.call(els, function (el) {
        el.addEventListener('click', function () {
          if (clickedEl && clickedEl !== el) {
            clickedEl.removeState('selected');
          }
          if (!el.classList.contains('clickable')) { return; }
          clickedEl = el;
          clickedEl.addState('selected');
        });
      });

      // Responding to mouse events.
      var cubes = document.querySelectorAll('a-entity[mixin*=cube]');
      var i;
      for (i = 0; i < cubes.length; ++i) {
        cubes[i].addEventListener('click', function () {
          var href = this.getAttribute('href');
          if (!href) { return; }
          window.top.postMessage({type: 'navigate', data: {url: href}}, '*');
        })
      }


// testing mouseenter and mouseleave
var chime = document.querySelector('#boop');
chime.addEventListener('click', function (evt) {
  var scene = document.querySelector('a-scene');
  var clickRing = document.createElement('a-entity');
  clickRing.id = 'clickRing-'+new Date().getTime();
  clickRing.setAttribute('material','shader:flat; color: #FFFFFF; transparent: true; opacity: 0.6');
  clickRing.setAttribute('geometry','primitive: ring; radius-inner: .5; radius-outer: 0.6');
  clickRing.setAttribute('position',evt.detail.intersection.point);
  clickRing.setAttribute('look-at',"[camera]");
  var opacityAnimation = document.createElement('a-animation');
  opacityAnimation.setAttribute('attribute','material.opacity');
  opacityAnimation.setAttribute('to',0);
  opacityAnimation.setAttribute('duration','250');
  opacityAnimation.setAttribute('easing','ease-out-quad');
  var scaleAnimation = document.createElement('a-animation');
  scaleAnimation.setAttribute('attribute','scale');
  scaleAnimation.setAttribute('to','5 5 5');
  scaleAnimation.setAttribute('duration','250');
  scaleAnimation.setAttribute('easing','ease-out-quad');
  alert.play();

  var onAnimationEnd = function () {
    scene.removeChild(document.querySelector('#'+clickRing.id))
  }
  scaleAnimation.addEventListener('animationend', onAnimationEnd.bind(this))
  clickRing.appendChild(opacityAnimation);
  clickRing.appendChild(scaleAnimation);
  scene.appendChild(clickRing);

})
   })();
</script>


  </a-scene>
</body>
</html>
